# テスト依頼書

## 概要

| 項目 | 内容 |
|------|------|
| プロジェクト | Task Purge |
| 依頼日 | 2026-01-07 |
| 対象URL | http://localhost:8080 または https://tp.polar-ai.app |
| テスト種別 | 機能テスト（Claude API連携） |
| 変更内容 | AI生成リマインドメッセージ機能追加 |

---

## 変更概要

### Before
- 音声リマインドは静的フレーズ（「タスクが残っています。{タスク名}」）
- ボード名（案件名）が読み上げられない

### After
- Claude APIで有機的なメッセージを生成
- ボード名 + タスク名 + 緊急感のあるメッセージ
- 例: 「鹿内様の案件で契約書・登記作成、今日中ですよ！」
- APIキー未設定時は従来の静的フレーズにfallback

---

## テスト対象機能

### 1. 設定画面（admin.html）- Claude API設定

| # | テスト項目 | 期待結果 |
|---|-----------|----------|
| 1-1 | 画面表示 | 「AI音声設定（任意）」セクションが表示される |
| 1-2 | Claude APIキー入力欄 | type="password"でマスク表示される |
| 1-3 | プレースホルダー | 「sk-ant-api...（任意）」と表示される |
| 1-4 | 保存（APIキーあり） | Claude APIキーが保存される |
| 1-5 | 保存（APIキーなし） | APIキーなしでも保存成功（任意項目） |
| 1-6 | 音声テスト（APIキーあり） | AI生成メッセージが発話される |
| 1-7 | 音声テスト（APIキーなし） | 静的フレーズ「音声テストです。タスクが残っています。」が発話される |

---

### 2. メイン画面（index.html）- AI音声リマインド

| # | テスト項目 | 期待結果 |
|---|-----------|----------|
| 2-1 | タスク検出時（APIキーあり） | AI生成メッセージでリマインド |
| 2-2 | タスク検出時（APIキーなし） | 静的フレーズでリマインド |
| 2-3 | メッセージ内容 | ボード名（案件名）が含まれる |
| 2-4 | タイムアウト | 5秒以内にAPI応答なければfallback |

---

### 3. エラーハンドリング

| # | テスト項目 | 期待結果 |
|---|-----------|----------|
| 3-1 | 無効なAPIキー | 静的フレーズにfallback（エラー表示なし） |
| 3-2 | API応答遅延 | 5秒タイムアウト後、静的フレーズにfallback |
| 3-3 | ネットワークエラー | 静的フレーズにfallback |

---

## テストアカウント

- メール: `test@shirokuma2103.com`
- パスワード: `4690test`

## Claude APIキー

テスト用APIキーを使用（設定画面で入力）

---

## テスト環境

| 項目 | 内容 |
|------|------|
| ブラウザ | Chrome最新版 |
| モード | ヘッドレス（音声テストは手動確認推奨） |

---

## 完了条件

- [ ] Claude APIキー入力欄が設定画面に表示される
- [ ] APIキー設定時、AI生成メッセージが発話される
- [ ] APIキー未設定時、静的フレーズにfallbackする
- [ ] ボード名（案件名）がメッセージに含まれる
- [ ] タイムアウト・エラー時もfallbackで動作継続
