# テスト依頼書

## 概要

| 項目 | 内容 |
|------|------|
| プロジェクト | Task Purge |
| 依頼日 | 2026-01-07 |
| 対象URL | http://localhost:8080 または https://tp.polar-ai.app |
| テスト種別 | 機能テスト（期限切れ対応 + Claude APIデバッグ） |
| 変更内容 | 期限切れタスク監視対応、Claude APIエラーログ追加 |

---

## 変更概要

### Before
- 当日期限のタスクのみ監視
- Claude APIエラーが握りつぶされていた

### After
- 期限切れ（過去日付）タスクも監視対象に追加
- 「期限切れ」「期限: 今日」を区別して表示
- Claude APIエラー時にconsole.errorでログ出力
- 音声メッセージで期限切れを強調

---

## テスト対象機能

### 1. 期限切れタスク対応（app.js）

| # | テスト項目 | 期待結果 |
|---|-----------|----------|
| 1-1 | 期限切れタスク検出 | 過去日付のタスクが一覧に表示される |
| 1-2 | 当日期限タスク検出 | 当日期限のタスクも引き続き表示される |
| 1-3 | 期限切れ表示 | 期限切れタスクに「期限切れ」と表示される |
| 1-4 | 当日表示 | 当日期限タスクに「期限: 今日」と表示される |
| 1-5 | 未来日付除外 | 未来日付のタスクは表示されない |

---

### 2. Claude APIエラーログ（speech.js）

| # | テスト項目 | 期待結果 |
|---|-----------|----------|
| 2-1 | 無効APIキー時 | DevToolsコンソールにエラーログ出力 |
| 2-2 | タイムアウト時 | DevToolsコンソールにエラーログ出力 |
| 2-3 | fallback動作 | エラー後も静的フレーズで発話される |

---

### 3. 音声メッセージ（期限情報対応）

| # | テスト項目 | 期待結果 |
|---|-----------|----------|
| 3-1 | 期限切れタスク音声 | 「【期限切れ】」が付与される（fallback時） |
| 3-2 | Claude API使用時 | 期限切れを強調したメッセージが生成される |
| 3-3 | 当日タスク音声 | 通常のリマインドメッセージ |

---

## テストアカウント

- メール: `test@shirokuma2103.com`
- パスワード: `4690test`

## テストデータ準備

Monday.comで以下のタスクを用意:
1. **期限切れタスク**: 過去日付 + 緊急/高 + 未完了 + 自分担当
2. **当日期限タスク**: 今日 + 緊急/高 + 未完了 + 自分担当
3. **未来タスク**: 明日以降 + 緊急/高 + 未完了 + 自分担当（除外確認用）

---

## テスト環境

| 項目 | 内容 |
|------|------|
| ブラウザ | Chrome最新版 |
| DevTools | コンソールタブ確認必須 |

---

## 完了条件

- [ ] 期限切れタスクが監視対象に含まれる
- [ ] 「期限切れ」「期限: 今日」の表示が正しい
- [ ] Claude APIエラー時にコンソールログが出力される
- [ ] 期限切れタスクの音声で期限切れが伝わる
- [ ] 既存機能（認証、保存）が正常動作する
